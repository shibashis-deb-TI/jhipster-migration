{"remainingRequest":"/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/thread-loader/dist/cjs.js??ref--9-2!/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/ts-loader/index.js??ref--9-3!/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/eslint-loader/dist/cjs.js!/Users/technoidentity/Desktop/dsp-jhipter-app/src/main/webapp/app/blocks/interceptor/auth-expired.interceptor.ts","dependencies":[{"path":"/Users/technoidentity/Desktop/dsp-jhipter-app/src/main/webapp/app/blocks/interceptor/auth-expired.interceptor.ts","mtime":1720520697321},{"path":"/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/angular2-template-loader/index.js","mtime":1486570058000},{"path":"/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7CnZhciBfYSwgX2IsIF9jLCBfZDsKaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7CmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7CmltcG9ydCB7IExvZ2luU2VydmljZSB9IGZyb20gJ2FwcC9jb3JlL2xvZ2luL2xvZ2luLnNlcnZpY2UnOwppbXBvcnQgeyBMb2dpbk1vZGFsU2VydmljZSB9IGZyb20gJ2FwcC9jb3JlL2xvZ2luL2xvZ2luLW1vZGFsLnNlcnZpY2UnOwppbXBvcnQgeyBTdGF0ZVN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnYXBwL2NvcmUvYXV0aC9zdGF0ZS1zdG9yYWdlLnNlcnZpY2UnOwpsZXQgQXV0aEV4cGlyZWRJbnRlcmNlcHRvciA9IGNsYXNzIEF1dGhFeHBpcmVkSW50ZXJjZXB0b3IgewogICAgY29uc3RydWN0b3IobG9naW5TZXJ2aWNlLCBsb2dpbk1vZGFsU2VydmljZSwgc3RhdGVTdG9yYWdlU2VydmljZSwgcm91dGVyKSB7CiAgICAgICAgdGhpcy5sb2dpblNlcnZpY2UgPSBsb2dpblNlcnZpY2U7CiAgICAgICAgdGhpcy5sb2dpbk1vZGFsU2VydmljZSA9IGxvZ2luTW9kYWxTZXJ2aWNlOwogICAgICAgIHRoaXMuc3RhdGVTdG9yYWdlU2VydmljZSA9IHN0YXRlU3RvcmFnZVNlcnZpY2U7CiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7CiAgICB9CiAgICBpbnRlcmNlcHQocmVxdWVzdCwgbmV4dCkgewogICAgICAgIHJldHVybiBuZXh0LmhhbmRsZShyZXF1ZXN0KS5waXBlKHRhcChudWxsLCAoZXJyKSA9PiB7CiAgICAgICAgICAgIGlmIChlcnIuc3RhdHVzID09PSA0MDEgJiYgZXJyLnVybCAmJiAhZXJyLnVybC5pbmNsdWRlcygnYXBpL2FjY291bnQnKSkgewogICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVN0b3JhZ2VTZXJ2aWNlLnN0b3JlVXJsKHRoaXMucm91dGVyLnJvdXRlclN0YXRlLnNuYXBzaG90LnVybCk7CiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luU2VydmljZS5sb2dvdXQoKTsKICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnJ10pOwogICAgICAgICAgICAgICAgdGhpcy5sb2dpbk1vZGFsU2VydmljZS5vcGVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICB9Cn07CkF1dGhFeHBpcmVkSW50ZXJjZXB0b3IgPSB0c2xpYl8xLl9fZGVjb3JhdGUoWwogICAgSW5qZWN0YWJsZSgpLAogICAgdHNsaWJfMS5fX21ldGFkYXRhKCJkZXNpZ246cGFyYW10eXBlcyIsIFt0eXBlb2YgKF9hID0gdHlwZW9mIExvZ2luU2VydmljZSAhPT0gInVuZGVmaW5lZCIgJiYgTG9naW5TZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9hIDogT2JqZWN0LCB0eXBlb2YgKF9iID0gdHlwZW9mIExvZ2luTW9kYWxTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBMb2dpbk1vZGFsU2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfYiA6IE9iamVjdCwgdHlwZW9mIChfYyA9IHR5cGVvZiBTdGF0ZVN0b3JhZ2VTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBTdGF0ZVN0b3JhZ2VTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9jIDogT2JqZWN0LCB0eXBlb2YgKF9kID0gdHlwZW9mIFJvdXRlciAhPT0gInVuZGVmaW5lZCIgJiYgUm91dGVyKSA9PT0gImZ1bmN0aW9uIiA/IF9kIDogT2JqZWN0XSkKXSwgQXV0aEV4cGlyZWRJbnRlcmNlcHRvcik7CmV4cG9ydCB7IEF1dGhFeHBpcmVkSW50ZXJjZXB0b3IgfTsK"},{"version":3,"file":"/Users/technoidentity/Desktop/dsp-jhipter-app/src/main/webapp/app/blocks/interceptor/auth-expired.interceptor.ts","sourceRoot":"","sources":["/Users/technoidentity/Desktop/dsp-jhipter-app/node_modules/eslint-loader/dist/cjs.js!/Users/technoidentity/Desktop/dsp-jhipter-app/src/main/webapp/app/blocks/interceptor/auth-expired.interceptor.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAG3C,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AACrC,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AAEzC,OAAO,EAAE,YAAY,EAAE,MAAM,8BAA8B,CAAC;AAC5D,OAAO,EAAE,iBAAiB,EAAE,MAAM,oCAAoC,CAAC;AACvE,OAAO,EAAE,mBAAmB,EAAE,MAAM,qCAAqC,CAAC;AAG1E,IAAa,sBAAsB,GAAnC,MAAa,sBAAsB;IACjC,YACU,YAA0B,EAC1B,iBAAoC,EACpC,mBAAwC,EACxC,MAAc;QAHd,iBAAY,GAAZ,YAAY,CAAc;QAC1B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,WAAM,GAAN,MAAM,CAAQ;IACrB,CAAC;IAEJ,SAAS,CAAC,OAAyB,EAAE,IAAiB;QACpD,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAC9B,GAAG,CAAC,IAAI,EAAE,CAAC,GAAsB,EAAE,EAAE;YACnC,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;gBACrE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;gBACxE,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;gBAC3B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;aAC/B;QACH,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;CACF,CAAA;AApBY,sBAAsB;IADlC,UAAU,EAAE;iEAGa,YAAY,oBAAZ,YAAY,oDACP,iBAAiB,oBAAjB,iBAAiB,oDACf,mBAAmB,oBAAnB,mBAAmB,oDAChC,MAAM,oBAAN,MAAM;GALb,sBAAsB,CAoBlC;SApBY,sBAAsB","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpErrorResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { Router } from '@angular/router';\n\nimport { LoginService } from 'app/core/login/login.service';\nimport { LoginModalService } from 'app/core/login/login-modal.service';\nimport { StateStorageService } from 'app/core/auth/state-storage.service';\n\n@Injectable()\nexport class AuthExpiredInterceptor implements HttpInterceptor {\n  constructor(\n    private loginService: LoginService,\n    private loginModalService: LoginModalService,\n    private stateStorageService: StateStorageService,\n    private router: Router\n  ) {}\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    return next.handle(request).pipe(\n      tap(null, (err: HttpErrorResponse) => {\n        if (err.status === 401 && err.url && !err.url.includes('api/account')) {\n          this.stateStorageService.storeUrl(this.router.routerState.snapshot.url);\n          this.loginService.logout();\n          this.router.navigate(['']);\n          this.loginModalService.open();\n        }\n      })\n    );\n  }\n}\n"]}]}